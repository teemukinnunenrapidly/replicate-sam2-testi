<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Replicate API Testi - Julkisivun Maalaus</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® Julkisivun AI-Maalaus</h1>
            <p>Testaa Replicate API:n kuvank√§sittely√§ julkisivun maalauksessa</p>
        </div>

        <div class="content">
            <!-- Kuva Upload -->
            <div class="upload-section" id="uploadSection">
                <h3>üì§ Lataa julkisivukuva</h3>
                <input type="file" id="imageInput" class="upload-input" accept="image/*">
                <label for="imageInput" class="upload-label">Valitse kuva</label>
                <div class="upload-info">
                    Tuetut formaatit: JPG, PNG, WebP (max 10MB)
                </div>
                <img id="previewImage" class="preview-image" style="display: none;">
            </div>

            <!-- Kontrollit -->
            <div class="controls-section">
                <div class="control-group">
                    <h3>üéØ SAM-2 Segmentointiasetukset</h3>
                    <div class="form-group">
                        <label for="segmentationModel">Segmentointimalli:</label>
                        <select id="segmentationModel">
                            <option value="sam2">SAM-2 (Segment Anything v2)</option>
                        </select>
                        <div class="param-description">
                            <small>Meta:n uusin segmentointimalli, joka tunnistaa ja erottaa objektit kuvista.</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="promptType">Prompt-tyyppi:</label>
                        <select id="promptType">
                            <option value="text">Teksti (suositeltu)</option>
                            <option value="point">Piste</option>
                            <option value="box">Laatikko</option>
                        </select>
                        <div class="param-description">
                            <small><strong>Teksti:</strong> Kuvaa mit√§ haluat segmentoida. <strong>Piste:</strong> Klikkaa tarkkaa kohtaa. <strong>Laatikko:</strong> Piirr√§ rajat.</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="segmentationPrompt">Segmentointiohje:</label>
                        <textarea id="segmentationPrompt" placeholder="Kuvaa mit√§ alueita haluat segmentoida...">Etsi ja segmentoi julkisivun ulkosein√§t, j√§t√§ ikkunat, ovet ja katto segmentoimatta. Tarkennus: talon sein√§t ja verhous.</textarea>
                        <div class="param-description">
                            <small>Kuvaa yksityiskohtaisesti mit√§ alueita haluat segmentoida. Tarkempi ohje = parempi tulos.</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="pointsPerSide">Segmentointitarkkuus:</label>
                        <input type="range" id="pointsPerSide" min="16" max="64" step="8" value="32">
                        <span id="pointsPerSideValue">32</span>
                        <div class="param-description">
                            <small><strong>16:</strong> Nopea, karkea. <strong>32:</strong> Tasapaino. <strong>64:</strong> Hidas, tarkka. Suurempi luku = parempi segmentointi.</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="predIouThresh">IoU kynnysarvo:</label>
                        <input type="range" id="predIouThresh" min="0.1" max="1.0" step="0.01" value="0.88">
                        <span id="predIouThreshValue">0.88</span>
                        <div class="param-description">
                            <small><strong>0.1-0.5:</strong> L√∂yh√§ segmentointi. <strong>0.5-0.8:</strong> Tasapaino. <strong>0.8-1.0:</strong> Tiukka segmentointi. Korkeampi = tarkempi.</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="stabilityScoreThresh">Stabiliteettikynnysarvo:</label>
                        <input type="range" id="stabilityScoreThresh" min="0.1" max="1.0" step="0.01" value="0.95">
                        <span id="stabilityScoreThreshValue">0.95</span>
                        <div class="param-description">
                            <small><strong>0.1-0.7:</strong> Ep√§vakaat tulokset. <strong>0.7-0.9:</strong> Vakaat. <strong>0.9-1.0:</strong> Eritt√§in vakaat. Korkeampi = luotettavampi.</small>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h3>üé® Maalausasetukset (SAM-2 + Maalausmallit)</h3>
                    <div class="form-group">
                        <label for="paintingModel">Maalausmalli:</label>
                        <select id="paintingModel">
                            <option value="sdxl">SDXL (Suositeltu - $0.05) - Korkealaatuinen inpainting</option>
                            <option value="controlnet">ControlNet + SDXL ($0.06) - Tarkka rakenteen s√§ilytt√§minen</option>
                            <option value="realistic">Realistic Vision ($0.04) - Fotorealistinen ulkoasu</option>
                            <option value="sd15">SD 1.5 Inpainting ($0.03) - Nopea ja edullinen</option>
                            <option value="dreamshaper">DreamShaper ($0.03) - Taiteellinen tyyli</option>
                        </select>
                        <div class="model-description" id="modelDescription">
                            <small>Valitse malli tarpeidesi mukaan. SDXL on suositeltu yleisk√§ytt√∂√∂n.</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="paintPrompt">Maalausohje:</label>
                        <textarea id="paintPrompt" placeholder="Kuvaa miten haluat maalata segmentoidut alueet...">Maalaa julkisivun ulkosein√§t puhtaalla valkoisella v√§rill√§. S√§ilyt√§ rakenteen tekstuuri ja luonnollinen ulkoasu. Ammattimainen ulkoasumaalaus.</textarea>
                        <div class="param-description">
                            <small>Kuvaa yksityiskohtaisesti miten haluat maalata segmentoidut alueet. Tarkempi ohje = parempi maalaus.</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="strength">Muutoksen voimakkuus:</label>
                        <input type="range" id="strength" min="0.1" max="1.0" step="0.1" value="0.6">
                        <span id="strengthValue">0.6</span>
                        <div class="param-description">
                            <small><strong>0.1-0.3:</strong> Hienovarainen muutos. <strong>0.4-0.7:</strong> Tasapaino. <strong>0.8-1.0:</strong> Dramaattinen muutos. Korkeampi = enemm√§n muutoksia.</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="guidanceScale">Ohjauksen voimakkuus:</label>
                        <input type="range" id="guidanceScale" min="1.0" max="20.0" step="0.5" value="7.5">
                        <span id="guidanceScaleValue">7.5</span>
                        <div class="param-description">
                            <small><strong>1.0-5.0:</strong> Vapaa luominen. <strong>5.0-10.0:</strong> Tasapaino. <strong>10.0-20.0:</strong> Tiukka ohjaus. Korkeampi = tarkempi promptin noudattaminen.</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="imageSize">Kuvakoko:</label>
                        <select id="imageSize">
                            <option value="512x512">512x512 (nopea)</option>
                            <option value="768x768">768x768 (tasapaino)</option>
                            <option value="1024x1024" selected>1024x1024 (laadukas)</option>
                        </select>
                        <div class="param-description">
                            <small><strong>512x512:</strong> Nopea, pienempi tarkkuus. <strong>768x768:</strong> Tasapaino. <strong>1024x1024:</strong> Hidas, korkea tarkkuus.</small>
                        </div>
                    </div>
                    
                    <!-- SDXL spesifiset parametrit -->
                    <div class="model-params" id="sdxlParams">
                        <h4>SDXL Asetukset</h4>
                        <div class="form-group">
                            <label for="refineType">Hienos√§√§t√∂:</label>
                            <select id="refineType">
                                <option value="expert_ensemble_refiner">Expert Ensemble Refiner</option>
                                <option value="base">Base (nopeampi)</option>
                            </select>
                            <div class="param-description">
                                <small><strong>Expert Ensemble:</strong> Korkealaatuinen hienos√§√§t√∂, hidas. <strong>Base:</strong> Nopeampi, perustaso.</small>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="scheduler">Scheduler:</label>
                            <select id="scheduler">
                                <option value="K_EULER">K-Euler</option>
                                <option value="DDIM">DDIM</option>
                                <option value="EULER">Euler</option>
                            </select>
                            <div class="param-description">
                                <small><strong>K-Euler:</strong> Suositeltu, tasapaino. <strong>DDIM:</strong> Nopea. <strong>Euler:</strong> Perinteinen.</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ControlNet spesifiset parametrit -->
                    <div class="model-params" id="controlnetParams" style="display: none;">
                        <h4>ControlNet Asetukset</h4>
                        <div class="form-group">
                            <label for="controlnetType">Kontrollityyppi:</label>
                            <select id="controlnetType">
                                <option value="canny">Canny (reunat)</option>
                                <option value="depth">Depth (syvyys)</option>
                                <option value="pose">Pose (asento)</option>
                                <option value="scribble">Scribble (piirustus)</option>
                            </select>
                            <div class="param-description">
                                <small><strong>Canny:</strong> Reunojen tunnistus, hyv√§ rakenteen s√§ilytt√§miseen. <strong>Depth:</strong> Syvyysinformaatio. <strong>Pose:</strong> Asentokontrolli. <strong>Scribble:</strong> Piirustuskontrolli.</small>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="controlnetStrength">Kontrollin voimakkuus:</label>
                            <input type="range" id="controlnetStrength" min="0.1" max="2.0" step="0.1" value="1.0">
                            <span id="controlnetStrengthValue">1.0</span>
                            <div class="param-description">
                                <small><strong>0.1-0.5:</strong> L√∂yh√§ kontrolli. <strong>0.5-1.0:</strong> Tasapaino. <strong>1.0-2.0:</strong> Tiukka kontrolli. Korkeampi = tarkempi rakenteen s√§ilytt√§minen.</small>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Realistic Vision spesifiset parametrit -->
                    <div class="model-params" id="realisticParams" style="display: none;">
                        <h4>Realistic Vision Asetukset</h4>
                        <div class="form-group">
                            <label for="realisticStrength">Realismin voimakkuus:</label>
                            <input type="range" id="realisticStrength" min="0.1" max="1.0" step="0.1" value="0.7">
                            <span id="realisticStrengthValue">0.7</span>
                            <div class="param-description">
                                <small><strong>0.1-0.4:</strong> Taiteellinen. <strong>0.4-0.7:</strong> Tasapaino. <strong>0.7-1.0:</strong> Fotorealistinen. Korkeampi = luonnollisempi ulkoasu.</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Generoi-nappi -->
            <div class="generate-section">
                <div class="form-group">
                    <label for="processType">Prosessin tyyppi:</label>
                    <select id="processType">
                        <option value="segmentation_only">Pelkk√§ segmentointi ($0.025)</option>
                        <option value="full_process" selected>T√§ysi prosessi: Segmentointi + Maalaus</option>
                    </select>
                    <div class="param-description">
                        <small><strong>Pelkk√§ segmentointi:</strong> Nopea testaus, n√§et mit√§ alueita mallin tunnistaa. <strong>T√§ysi prosessi:</strong> Valmis lopputulos, mutta kalliimpi.</small>
                    </div>
                </div>
                
                <button id="generateBtn" class="generate-btn">
                    üöÄ Generoi segmentointi
                </button>
            </div>

            <!-- Status ja progress -->
            <div id="statusContainer" style="display: none;">
                <div class="status info" id="statusMessage">
                    Valmistellaan prosessia...
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <!-- Tulokset -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <div class="result-card">
                    <h3>üì∏ Alkuper√§inen kuva</h3>
                    <img id="originalResult" class="result-image" alt="Alkuper√§inen kuva">
                </div>
                <div class="result-card">
                    <h3>üé® Muokattu kuva</h3>
                    <img id="processedResult" class="result-image" alt="Muokattu kuva">
                </div>
            </div>

            <!-- Segmentointitulokset (pelk√§lle segmentoinnille) -->
            <div class="segmentation-results-section" id="segmentationResultsSection" style="display: none;">
                <div class="result-card">
                    <h3>üì∏ Alkuper√§inen kuva</h3>
                    <img id="originalImage" class="result-image" alt="Alkuper√§inen kuva">
                </div>
                <div class="result-card">
                    <h3>üéØ Segmentointitulokset</h3>
                    <img id="segmentationResultImage" class="result-image" alt="Segmentointitulokset">
                    <div class="segmentation-info">
                        <p id="segmentationPrompt" class="segmentation-prompt"></p>
                        <div class="segmentation-metrics">
                            <div class="metric">
                                <strong>Prompt-tyyppi:</strong> <span id="promptTypeValue"></span>
                            </div>
                            <div class="metric">
                                <strong>Segmenttej√§:</strong> <span id="segmentCount">-</span>
                            </div>
                            <div class="metric">
                                <strong>Luottamus:</strong> <span id="confidenceScore">-</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Kustannustiedot -->
            <div class="cost-info" id="costInfo" style="display: none;">
                <h4>üí∞ Kustannustiedot (SAM-2)</h4>
                <div class="cost-item">
                    <span>Segmentointi (SAM-2):</span>
                    <span id="segmentationCost">~$0.025</span>
                </div>
                <div class="cost-item">
                    <span>Maalaus (Stable Diffusion):</span>
                    <span id="paintingCost">~$0.05</span>
                </div>
                <div class="cost-item">
                    <span><strong>Yhteens√§:</strong></span>
                    <span id="totalCost"><strong>~$0.075</strong></span>
                </div>
                <div class="cost-note">
                    <small>* Hinnoittelu perustuu Replicate:n virallisiin hintoihin</small>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
